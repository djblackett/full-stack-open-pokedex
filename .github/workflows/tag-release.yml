name: Bump Version
on:
  workflow_call:
jobs:
  Pipeline:
    uses: ./.github/workflows/pipeline.yml
  tag_release:
    needs: [ Pipeline ]
    if: ${{ github.event_name == 'push' && !contains(join(toJson(github.event.commits.*.message)), '# skip') }}
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v3
      - uses: anothrNick/github-tag-action@1.64.0 # Don't use @master or @v1 unless you're happy to test the latest version
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # if you don't want to set write permissions use a PAT token
          WITH_V: false
          DEFAULT_BUMP: patch
          RELEASE_BRANCHES: main
          COMMIT_MESSAGES: ${{ toJson(github.event.commits.*.message) }}
          DRY_RUN: true